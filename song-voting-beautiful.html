<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Song Voting</title>
  <style>
    :root {
      --primary: #007bff;
      --primary-hover: #0056b3;
      --bg: #f5f7fb;
      --card-bg: #fff;
      --accent: #E1306C;
    }

    body {
      font-family: "Inter", Arial, sans-serif;
      background: var(--bg);
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      color: #222;
      text-align: center;
      margin-top: 10px;
      font-size: 1.8em;
    }

    .vote-container {
      width: 100%;
      max-width: 420px;
      background: var(--card-bg);
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 20px;
      margin-top: 20px;
    }

    label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #f1f3f5;
      border-radius: 8px;
      padding: 10px 14px;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.3s;
    }

    label:hover {
      background: #e9ecef;
      transform: scale(1.01);
    }

    input[type="radio"] {
      margin-right: 10px;
    }

    button {
      width: 100%;
      background: var(--primary);
      color: white;
      border: none;
      padding: 12px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s;
      margin-top: 10px;
    }

    button:hover {
      background: var(--primary-hover);
    }

    #newSongInput {
      width: calc(100% - 24px);
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      margin-top: 10px;
    }

    #instagramBtn {
      background: var(--accent);
      color: white;
      font-weight: bold;
      text-decoration: none;
      display: inline-block;
      text-align: center;
      padding: 14px 22px;
      border-radius: 10px;
      margin-bottom: 15px;
      width: 90%;
      max-width: 420px;
      transition: background 0.3s;
      font-size: 16px;
    }

    #instagramBtn:hover {
      background: #c7235d;
    }
  </style>
</head>
<body>
  <a id="instagramBtn" href="https://instagram.com/maurice_has" target="_blank">Folge mir auf Instagram</a>
  <h1>Song Voting</h1>
  <div class="vote-container">
    <form id="voteForm"></form>

    <input type="text" id="newSongInput" placeholder="Eigenen Songvorschlag eingeben..." />
    <button type="button" id="addSongButton">Absenden</button>
    <button type="button" id="voteButton">Abstimmen</button>
  </div>

  <script>
    const songs = [
      "Bonnie und Clyde","Free Fallin","Proud Mary","Great Expectations","Ayo Technology",
      "Streets of London","Bad Moon Rising","The Middle","Hotel California","I See Fire","Riptide",
      "Hero of War","Liebeslied","Wagon Wheel","Go your own way","Leaving on a Jetplane",
      "Dancing in the Dark","Breakfast","Willenlos","Hier kommt Alex","Drops of Jupiter",
      "Junimond","How to save a life","Folsom Prison Blues","The Boxer","Sexy","Believe","This Love",
      "Sweet Home Alabama","Everlong","This is the Life","Valerie","I’m on Fire","American Pie",
      "Runaway","Rose Tattoo","Sympathy for the Devil","Johnny B. Goode","Kryptonite","Summer of 69",
      "Heute hier morgen dort","You shook me all night long","Best of You","Country Roads","Mit 18",
      "So Lonely","Iris","Don’t stop believing","Don’t look back in anger","Zehn kleine Jägermeister",
      "Mr. Brightside","Save Tonight","Purple Rain","Knocking on Heaven’s Door","Westerland","Taximann",
      "Wir haben Grund zu feiern","König von Deutschland","Narcotic","Wonderwall","Angels","Ein Kompliment","Dicke"
    ];

    const bannedWords = ["onkelz", "böhse", "onkels", "helene", "fischer", "andrea", "berg"];
    const counts = JSON.parse(localStorage.getItem('songVotes')) || {};
    const form = document.getElementById('voteForm');

    songs.forEach((song, i) => {
      const label = document.createElement('label');
      const key = song.replace(/\s+/g, '_');
      const count = counts[key] || 0;
      label.innerHTML = `
        <span><input type="radio" name="song" value="${song}"> ${song}</span>
        <span data-key="${key}" id="count_${i}">${count}</span>
      `;
      form.appendChild(label);
    });

    function updateDisplay() {
      for (const key in counts) {
        const el = document.querySelector(\`[data-key='\${key}']\`);
        if (el) el.textContent = counts[key];
      }
    }

    updateDisplay();

    document.getElementById('voteButton').addEventListener('click', () => {
      const selected = document.querySelector('input[name="song"]:checked');
      if (!selected) {
        alert('Bitte eine Option auswählen!');
        return;
      }

      const key = selected.value.replace(/\s+/g, '_');
      counts[key] = (counts[key] || 0) + 1;
      localStorage.setItem('songVotes', JSON.stringify(counts));
      updateDisplay();
      alert(\`Danke für deine Stimme für "\${selected.value}"!\`);
      selected.checked = false;
    });

    document.getElementById('addSongButton').addEventListener('click', () => {
      const input = document.getElementById('newSongInput');
      const newSong = input.value.trim();
      if (!newSong) {
        alert('Bitte gib einen Songtitel ein!');
        return;
      }

      const lower = newSong.toLowerCase();
      if (bannedWords.some(word => lower.includes(word))) {
        alert('Tut mir leid, das scheint ein Scheißlied zu sein.');
        input.value = '';
        return;
      }

      const key = newSong.replace(/\s+/g, '_') + '_Wunsch';
      counts[key] = counts[key] || 0;

      const newLabel = document.createElement('label');
      newLabel.innerHTML = `
        <span><input type="radio" name="song" value="\${newSong} (Wunsch)"> \${newSong} <em>(Wunsch)</em></span>
        <span data-key="\${key}">0</span>
      `;
      form.appendChild(newLabel);
      input.value = '';
      alert(\`"\${newSong}" wurde als Wunsch hinzugefügt!\`);
    });
  </script>
</body>
</html>